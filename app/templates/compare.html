{% extends "base.html" %} {% block title %}Compare Schools - NSW School Finder{%
endblock %} {% block content %}
<div class="max-w-6xl mx-auto">
  <div class="mb-6">
    <a
      href="javascript:history.back()"
      class="text-black hover:underline font-hand mb-4 inline-block"
      >← Back</a
    >
    <h1 class="text-3xl sm:text-4xl font-hand font-bold text-black mb-2">
      Compare Schools
    </h1>
  </div>

  {% if schools|length == 0 %}
  <div class="bg-gray-50 border-2 border-black rounded-lg p-8 text-center">
    <p class="text-lg text-gray-700 font-sans">
      No schools selected for comparison.
    </p>
    <a
      href="/"
      class="text-black hover:underline font-hand mt-4 inline-block"
      >Search for schools</a
    >
  </div>
  {% else %}

  <!-- Mobile scroll hint -->
  <p class="text-sm text-gray-500 mb-2 sm:hidden font-sans">
    ← Swipe to see all schools →
  </p>

  <div
    class="bg-white border-2 border-black rounded-lg overflow-hidden"
  >
    <div class="overflow-x-auto">
      <table class="w-full border-collapse font-sans text-sm sm:text-base">
        <thead>
          <tr class="border-b-2 border-black">
            <th class="text-left p-2 sm:p-3 font-hand font-bold text-black bg-gray-50 sticky left-0 min-w-[80px] sm:min-w-[120px]"></th>
            {% for school in schools %}
            <th class="text-left p-2 sm:p-3 font-hand font-bold text-black min-w-[120px] sm:min-w-[180px]">
              {{ school.school_name }}
            </th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-black">
            <td class="p-2 sm:p-3 font-semibold text-black bg-gray-50 sticky left-0">Level</td>
            {% for school in schools %}
            <td class="p-2 sm:p-3 text-gray-700">{{ school.level_of_schooling }}</td>
            {% endfor %}
          </tr>
          <tr class="border-b border-black">
            <td class="p-2 sm:p-3 font-semibold text-black bg-gray-50 sticky left-0">Distance</td>
            {% for school in schools %}
            <td class="p-2 sm:p-3 text-gray-700">
              {% if school.distance is not none %} {{ school.distance }} km
              {% else %} N/A {% endif %}
            </td>
            {% endfor %}
          </tr>
          <tr class="border-b border-black">
            <td class="p-2 sm:p-3 font-semibold text-black bg-gray-50 sticky left-0">Location</td>
            {% for school in schools %}
            <td class="p-2 sm:p-3 text-gray-700">
              {{ school.town_suburb }}{% if school.postcode %}, {{ school.postcode }}{% endif %}
            </td>
            {% endfor %}
          </tr>
          <tr class="border-b border-black">
            <td class="p-2 sm:p-3 font-semibold text-black bg-gray-50 sticky left-0">Address</td>
            {% for school in schools %}
            <td class="p-2 sm:p-3 text-gray-700">{{ school.street }}</td>
            {% endfor %}
          </tr>
          <tr class="border-b border-black">
            <td class="p-2 sm:p-3 font-semibold text-black bg-gray-50 sticky left-0">Gender</td>
            {% for school in schools %}
            <td class="p-2 sm:p-3 text-gray-700">{{ school.gender }}</td>
            {% endfor %}
          </tr>
          <tr class="border-b border-black">
            <td class="p-2 sm:p-3 font-semibold text-black bg-gray-50 sticky left-0">Size</td>
            {% for school in schools %}
            <td class="p-2 sm:p-3 text-gray-700">
              {{ school.school_size }} {% if school.enrolment_raw %}
              <span class="text-xs text-gray-500 block">({{ "%.0f"|format(school.enrolment_raw) }})</span>
              {% endif %}
            </td>
            {% endfor %}
          </tr>
          <tr class="border-b border-black">
            <td class="p-2 sm:p-3 font-semibold text-black bg-gray-50 sticky left-0">Community</td>
            {% for school in schools %}
            <td class="p-2 sm:p-3 text-gray-700 text-xs sm:text-sm">{{ school.community }}</td>
            {% endfor %}
          </tr>
          <tr class="border-b border-black">
            <td class="p-2 sm:p-3 font-semibold text-black bg-gray-50 sticky left-0">Programs</td>
            {% for school in schools %}
            <td class="p-2 sm:p-3 text-gray-700 text-xs sm:text-sm">
              {% if school.special_features %} {{ school.special_features|join(', ') }} {% else %}
              <span class="text-gray-400">None</span>
              {% endif %}
            </td>
            {% endfor %}
          </tr>
          <tr class="border-b border-black">
            <td class="p-2 sm:p-3 font-semibold text-black bg-gray-50 sticky left-0">Selective</td>
            {% for school in schools %}
            <td class="p-2 sm:p-3 text-gray-700">{{ school.selective_school }}</td>
            {% endfor %}
          </tr>
          <tr class="border-b border-black">
            <td class="p-2 sm:p-3 font-semibold text-black bg-gray-50 sticky left-0">OC</td>
            {% for school in schools %}
            <td class="p-2 sm:p-3 text-gray-700">
              {% if school.has_opportunity_class %}
              <span class="text-green-700 font-semibold">Yes</span>
              {% else %}
              <span class="text-gray-400">No</span>
              {% endif %}
            </td>
            {% endfor %}
          </tr>
          {% if schools|selectattr("icsea_value")|list|length > 0 %}
          <tr class="border-b border-black">
            <td class="p-2 sm:p-3 font-semibold text-black bg-gray-50 sticky left-0">ICSEA</td>
            {% for school in schools %}
            <td class="p-2 sm:p-3 text-gray-700">
              {% if school.icsea_value %} {{ school.icsea_value }} {% else %} N/A {% endif %}
            </td>
            {% endfor %}
          </tr>
          {% endif %}
          <tr class="border-t-2 border-black">
            <td class="p-2 sm:p-3 font-semibold text-black bg-gray-50 sticky left-0 align-top">Contact</td>
            {% for school in schools %}
            <td class="p-2 sm:p-3 space-y-2">
              <!-- Phone -->
              {% if school.phone %}
              <div class="flex items-center gap-1">
                <svg
                  class="w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0 text-black"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                  />
                </svg>
                <a
                  href="tel:{{ school.phone }}"
                  class="text-xs sm:text-sm font-sans text-black hover:underline"
                  >{{ school.phone }}</a
                >
              </div>
              {% endif %}

              <!-- Email -->
              {% if school.school_email %}
              <div class="flex items-center gap-1">
                <svg
                  class="w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0 text-black"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                  />
                </svg>
                <a
                  href="mailto:{{ school.school_email }}"
                  class="text-xs sm:text-sm font-sans text-black hover:underline truncate max-w-[100px] sm:max-w-none"
                  >Email</a
                >
              </div>
              {% endif %}

              <!-- Website -->
              {% if school.website %}
              <div class="flex items-center gap-1">
                <svg
                  class="w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0 text-black"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"
                  />
                </svg>
                <a
                  href="{{ school.website }}"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-xs sm:text-sm font-sans text-black hover:underline"
                  >Website</a
                >
              </div>
              {% endif %}

              <!-- View Details -->
              <a
                href="/school/{{ school.id }}"
                class="inline-block bg-black text-white px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm font-hand font-bold hover:bg-gray-800 mt-1"
                >Details</a
              >
            </td>
            {% endfor %}
          </tr>
        </tbody>
      </table>
    </div>

    {% if schools|selectattr("icsea_value")|list|length > 0 %}
    <div class="p-3 sm:p-4 bg-gray-50 border-t-2 border-black">
      <p class="font-sans text-xs sm:text-sm text-gray-600 italic">
        ICSEA shows the socio-educational background of students. It does not measure school quality.
      </p>
    </div>
    {% endif %}
  </div>
  {% endif %}
</div>
{% endblock %}
