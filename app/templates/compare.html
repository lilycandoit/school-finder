{% extends "base.html" %} {% block title %}Compare Schools - NSW School Finder{%
endblock %} {% block content %}
<div class="max-w-6xl mx-auto">
  <div class="mb-6">
    <a
      href="javascript:history.back()"
      class="text-black hover:underline font-hand mb-4 inline-block"
      >‚Üê Back</a
    >
    <h1 class="text-3xl sm:text-4xl font-hand font-bold text-black mb-2">
      Compare Schools
    </h1>
  </div>

  {% if schools|length == 0 %}
  <div class="bg-gray-50 border-2 border-black rounded-lg p-8 text-center">
    <p class="text-lg text-gray-700 font-sans">
      No schools selected for comparison.
    </p>
    <a
      href="/"
      class="text-black hover:underline font-hand mt-4 inline-block"
      >Search for schools</a
    >
  </div>
  {% else %}
  <div
    class="bg-white border-2 border-black rounded-lg p-4 sm:p-6 overflow-x-auto"
  >
    <table class="w-full border-collapse font-sans">
      <thead>
        <tr class="border-b-2 border-black">
          <th class="text-left p-2 font-hand font-bold text-black"></th>
          {% for school in schools %}
          <th class="text-left p-2 font-hand font-bold text-black">
            {{ school.school_name }}
          </th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        <tr class="border-b border-black">
          <td class="p-2 font-semibold text-black">Level</td>
          {% for school in schools %}
          <td class="p-2 text-gray-700">{{ school.level_of_schooling }}</td>
          {% endfor %}
        </tr>
        <tr class="border-b border-black">
          <td class="p-2 font-semibold text-black">Distance</td>
          {% for school in schools %}
          <td class="p-2 text-gray-700">
            {% if school.distance is not none %} {{ school.distance }} km away
            {% else %} Not available {% endif %}
          </td>
          {% endfor %}
        </tr>
        <tr class="border-b border-black">
          <td class="p-2 font-semibold text-black">Location</td>
          {% for school in schools %}
          <td class="p-2 text-gray-700">
            {{ school.town_suburb }}{% if school.postcode %}, {{ school.postcode
            }}{% endif %}
          </td>
          {% endfor %}
        </tr>
        <tr class="border-b border-black">
          <td class="p-2 font-semibold text-black">Address</td>
          {% for school in schools %}
          <td class="p-2 text-gray-700">{{ school.street }}</td>
          {% endfor %}
        </tr>
        <tr class="border-b border-black">
          <td class="p-2 font-semibold text-black">Gender</td>
          {% for school in schools %}
          <td class="p-2 text-gray-700">{{ school.gender }}</td>
          {% endfor %}
        </tr>
        <tr class="border-b border-black">
          <td class="p-2 font-semibold text-black">School Size</td>
          {% for school in schools %}
          <td class="p-2 text-gray-700">
            {{ school.school_size }} {% if school.enrolment_raw %}
            <span class="text-xs text-gray-600"
              >({{ "%.0f"|format(school.enrolment_raw) }} students)</span
            >
            {% endif %}
          </td>
          {% endfor %}
        </tr>
        <tr class="border-b border-black">
          <td class="p-2 font-semibold text-black">Community</td>
          {% for school in schools %}
          <td class="p-2 text-gray-700">{{ school.community }}</td>
          {% endfor %}
        </tr>
        <tr class="border-b border-black">
          <td class="p-2 font-semibold text-black">Programs</td>
          {% for school in schools %}
          <td class="p-2 text-gray-700">
            {% if school.special_features %} {{ school.special_features|join(',
            ') }} {% else %}
            <span class="text-gray-600">None listed</span>
            {% endif %}
          </td>
          {% endfor %}
        </tr>
        <tr class="border-b border-black">
          <td class="p-2 font-semibold text-black">Selective</td>
          {% for school in schools %}
          <td class="p-2 text-gray-700">{{ school.selective_school }}</td>
          {% endfor %}
        </tr>
        <tr class="border-b border-black">
          <td class="p-2 font-semibold text-black">Opportunity Class</td>
          {% for school in schools %}
          <td class="p-2 text-gray-700">
            {% if school.has_opportunity_class %}
            <span class="text-green-700 font-semibold">Yes</span>
            {% else %}
            <span class="text-gray-500">No</span>
            {% endif %}
          </td>
          {% endfor %}
        </tr>
        {% if schools|selectattr("icsea_value")|list|length > 0 %}
        <tr class="border-b-2 border-black">
          <td class="p-2 font-semibold text-black">ICSEA Value</td>
          {% for school in schools %}
          <td class="p-2 text-gray-700">
            {% if school.icsea_value %} {{ school.icsea_value }} {% else %} Not
            available {% endif %}
          </td>
          {% endfor %}
        </tr>
        <tr>
          <td
            colspan="{{ schools|length + 1 }}"
            class="p-4 bg-white border-t-2 border-black"
          >
            <p class="font-sans text-sm text-gray-700 italic">
              ICSEA shows the general socio-educational background of students
              at a school. It does not measure school quality or teaching
              performance.
            </p>
          </td>
        </tr>
        {% endif %}
        <tr class="border-t-2 border-black">
          <td class="p-2 font-semibold text-black">Contact</td>
          {% for school in schools %}
          <td class="p-2 space-y-2">
            <!-- Phone -->
            {% if school.phone %}
            <div class="flex items-center gap-2">
              <svg
                class="w-4 h-4 flex-shrink-0 text-black"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                />
              </svg>
              <a
                href="tel:{{ school.phone }}"
                class="text-sm font-sans text-black hover:underline"
                >{{ school.phone }}</a
              >
            </div>
            {% endif %}

            <!-- Email -->
            {% if school.school_email %}
            <div class="flex items-center gap-2">
              <svg
                class="w-4 h-4 flex-shrink-0 text-black"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                />
              </svg>
              <a
                href="mailto:{{ school.school_email }}"
                class="text-sm font-sans text-black hover:underline break-all"
                >{{ school.school_email }}</a
              >
            </div>
            {% endif %}

            <!-- Website -->
            {% if school.website %}
            <div class="flex items-center gap-2">
              <svg
                class="w-4 h-4 flex-shrink-0 text-black"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"
                />
              </svg>
              <a
                href="{{ school.website }}"
                target="_blank"
                rel="noopener noreferrer"
                class="text-sm font-sans text-black hover:underline"
                >Visit</a
              >
            </div>
            {% endif %}

            <!-- View Details -->
            <div class="inline-block bg-black text-white px-4 py-2 rounded-full font-hand font-bold">
              <a
                href="/school/{{ school.id }}"
                class="text-sm font-hand text-white hover:underline"
                >View Details</a
              >
            </div>
          </td>
          {% endfor %}
        </tr>
      </tbody>
    </table>
  </div>
  {% endif %}
</div>
{% endblock %}
